scoreboard players set $time startup_timer -1
tag @a[scores={ready=1..}] add playing
title @a[tag=!playing] title {"translate":" "}
title @a[tag=!playing] subtitle {"translate":" "}
execute if entity @a[tag=playing,tag=rider_0] as @e[type=horse,tag=rider_0] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_1] as @e[type=horse,tag=rider_1] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_2] as @e[type=horse,tag=rider_2] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_3] as @e[type=horse,tag=rider_3] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_4] as @e[type=horse,tag=rider_4] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_5] as @e[type=horse,tag=rider_5] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_6] as @e[type=horse,tag=rider_6] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_7] as @e[type=horse,tag=rider_7] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_8] as @e[type=horse,tag=rider_8] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_9] as @e[type=horse,tag=rider_9] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_10] as @e[type=horse,tag=rider_10] at @s run function lobby:remove_mob

execute if entity @a[tag=playing,tag=rider_11] as @e[type=horse,tag=rider_11] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_12] as @e[type=horse,tag=rider_12] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_13] as @e[type=horse,tag=rider_13] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_14] as @e[type=horse,tag=rider_14] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_15] as @e[type=horse,tag=rider_15] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_16] as @e[type=horse,tag=rider_16] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_17] as @e[type=horse,tag=rider_17] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_18] as @e[type=horse,tag=rider_18] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_19] as @e[type=horse,tag=rider_19] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_20] as @e[type=horse,tag=rider_20] at @s run function lobby:remove_mob

execute if entity @a[tag=playing,tag=rider_21] as @e[type=horse,tag=rider_21] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_22] as @e[type=horse,tag=rider_22] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_23] as @e[type=horse,tag=rider_23] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_24] as @e[type=horse,tag=rider_24] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_25] as @e[type=horse,tag=rider_25] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_26] as @e[type=horse,tag=rider_26] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_27] as @e[type=horse,tag=rider_27] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_28] as @e[type=horse,tag=rider_28] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_29] as @e[type=horse,tag=rider_29] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_30] as @e[type=horse,tag=rider_30] at @s run function lobby:remove_mob


execute if entity @a[tag=playing,tag=rider_31] as @e[type=horse,tag=rider_31] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_32] as @e[type=horse,tag=rider_32] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_33] as @e[type=horse,tag=rider_33] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_34] as @e[type=horse,tag=rider_34] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_35] as @e[type=horse,tag=rider_35] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_36] as @e[type=horse,tag=rider_36] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_37] as @e[type=horse,tag=rider_37] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_38] as @e[type=horse,tag=rider_38] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_39] as @e[type=horse,tag=rider_39] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_40] as @e[type=horse,tag=rider_40] at @s run function lobby:remove_mob

execute if entity @a[tag=playing,tag=rider_41] as @e[type=horse,tag=rider_41] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_42] as @e[type=horse,tag=rider_42] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_43] as @e[type=horse,tag=rider_43] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_44] as @e[type=horse,tag=rider_44] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_45] as @e[type=horse,tag=rider_45] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_46] as @e[type=horse,tag=rider_46] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_47] as @e[type=horse,tag=rider_47] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_48] as @e[type=horse,tag=rider_48] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_49] as @e[type=horse,tag=rider_49] at @s run function lobby:remove_mob
execute if entity @a[tag=playing,tag=rider_50] as @e[type=horse,tag=rider_50] at @s run function lobby:remove_mob

# button
setblock 35 70 -40 air


tag @a[tag=playing] remove has_mob
tag @a[tag=playing] remove rider_0
tag @a[tag=playing] remove rider_1
tag @a[tag=playing] remove rider_2
tag @a[tag=playing] remove rider_3
tag @a[tag=playing] remove rider_4
tag @a[tag=playing] remove rider_5
tag @a[tag=playing] remove rider_6
tag @a[tag=playing] remove rider_7
tag @a[tag=playing] remove rider_8
tag @a[tag=playing] remove rider_9
tag @a[tag=playing] remove rider_10

tag @a[tag=playing] remove rider_11
tag @a[tag=playing] remove rider_12
tag @a[tag=playing] remove rider_13
tag @a[tag=playing] remove rider_14
tag @a[tag=playing] remove rider_15
tag @a[tag=playing] remove rider_16
tag @a[tag=playing] remove rider_17
tag @a[tag=playing] remove rider_18
tag @a[tag=playing] remove rider_19
tag @a[tag=playing] remove rider_20

tag @a[tag=playing] remove rider_21
tag @a[tag=playing] remove rider_22
tag @a[tag=playing] remove rider_23
tag @a[tag=playing] remove rider_24
tag @a[tag=playing] remove rider_25
tag @a[tag=playing] remove rider_26
tag @a[tag=playing] remove rider_27
tag @a[tag=playing] remove rider_28
tag @a[tag=playing] remove rider_29
tag @a[tag=playing] remove rider_30

tag @a[tag=playing] remove rider_31
tag @a[tag=playing] remove rider_32
tag @a[tag=playing] remove rider_33
tag @a[tag=playing] remove rider_34
tag @a[tag=playing] remove rider_35
tag @a[tag=playing] remove rider_36
tag @a[tag=playing] remove rider_37
tag @a[tag=playing] remove rider_38
tag @a[tag=playing] remove rider_39
tag @a[tag=playing] remove rider_40

tag @a[tag=playing] remove rider_41
tag @a[tag=playing] remove rider_42
tag @a[tag=playing] remove rider_43
tag @a[tag=playing] remove rider_44
tag @a[tag=playing] remove rider_45
tag @a[tag=playing] remove rider_46
tag @a[tag=playing] remove rider_47
tag @a[tag=playing] remove rider_48
tag @a[tag=playing] remove rider_49
tag @a[tag=playing] remove rider_50

gamemode spectator @a[tag=playing]
tp @a[tag=playing] 1007 0 132
clear @a[tag=playing]
clear @a carrot_on_a_stick{CustomModelData:2}
effect clear @a[tag=playing]
scoreboard players set $game state 1
scoreboard players set $time game -20
title @a[tag=playing] title [{"translate":" "}]
title @a[tag=playing] subtitle {"translate":"Generation in progress . . .","color":"red","italic":true}
title @a times 0 500 5
effect give @a[tag=playing] blindness 100 255 true
effect give @a[tag=playing] levitation 100 255 true
item replace entity @a[tag=playing] armor.head with carved_pumpkin{HideFlags:63,Enchantments:[{id:"binding_curse",lvl:1}],display:{Name:'[{"translate":"CR Logo","color":"dark_aqua","bold":false,"italic":false}]'},CustomModelData:1}
scoreboard objectives remove playing
function game:gameplay/start_game
execute if score $number mode matches 1 run function game:gameplay/rotation/start_game
scoreboard players set $round game 1
bossbar set lobby players @a[tag=!playing]
execute if score $number mode matches 1 if score $number infection matches 0 run tellraw @a[tag=playing] [{"translate":""},{"translate":"Stealthiators","color":"dark_gray","bold":true},{"translate":" Rotation Mode","color":"gold","bold":true},{"translate":"\nIn this mode, everyone gets a chance to be a gladiator. Your goal is to be the player with the most points. You can earn points by doing the following actions:","color":"#9c9558"},{"translate":"\nCrossing a band as a runner | 1 point","color":"gray"},{"translate":"\nStepping on the finish line as a runner | 5 points","color":"gray"},{"translate":"\nStepping on the finish line first | 1 point","color":"yellow"},{"translate":"\nRunners winning the round | 1 point","color":"gray"},{"translate":"\nA player you revived stepping on finish line | 2 points","color":"gray"},{"translate":"\nKilling someone as a gladiator | 2 points","color":"red"},{"translate":"\nGladiators winning the round | 4 points","color":"red"}]
execute if score $number mode matches 1 if score $number infection matches 1 run tellraw @a[tag=playing] [{"translate":""},{"translate":"Stealthiators","color":"dark_gray","bold":true},{"translate":" Rotation Mode","color":"gold","bold":true},{"translate":"\nIn this mode, everyone gets a chance to be a gladiator. Your goal is to be the player with the most points. You can earn points by doing the following actions:","color":"#9c9558"},{"translate":"\nCrossing a band as a runner | 1 point","color":"gray"},{"translate":"\nStepping on the finish line as a runner | 5 points","color":"gray"},{"translate":"\nStepping on the finish line first | 1 point","color":"yellow"},{"translate":"\nRunners winning the round | 1 point","color":"gray"},{"translate":"\nA player you revived stepping on finish line | 2 points","color":"gray"},{"translate":"\nKilling someone as a gladiator | 2 points","color":"red"},{"translate":"\nGladiators winning the round | 4 points","color":"red"},{"translate":"\nWinning the round as an infected gladiator | 1 point","color":"red"}]
scoreboard players set $player_finish game 0
scoreboard players set $players number 0
execute as @a[tag=playing] at @s run scoreboard players add $players number 1
execute if score $auto generation matches 0 run function game:generation/custom_generation
execute if score $auto generation matches 1 run function game:generation/auto_generation
scoreboard objectives add back_to_lobby trigger
advancement grant @a[tag=playing] only minecraft:custom/play_game

data modify entity @e[type=area_effect_cloud,tag=start_button_text,limit=1] CustomNameVisible set value 0b

execute store result score $players game if entity @a[tag=playing]